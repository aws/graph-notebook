[build-system]
requires = [
    "hatchling>=1.5.0",
    "jupyterlab>=4.0.0,<5.0.0",
    "hatch-nodejs-version",
    "hatch-jupyter-builder>=0.5"
]
build-backend = "hatchling.build"

[project]
name = "graph-notebook"
version = "4.6.2"
description = "Jupyter notebook extension to connect to graph databases"
readme = "README.md"
license = { file = "LICENSE" }
requires-python = ">=3.8"
authors = [
    { name = "amazon-neptune", email = "amazon-neptune-pypi@amazon.com" },
]
dependencies = [
    'gremlinpython>=3.5.1,<=3.7.2',
    'SPARQLWrapper==2.0.0',
    'requests>=2.32.0,<=2.32.2',
    'ipywidgets>=8.0.0,<9.0.0',
    'jupyterlab>=4.3.5,<5.0.0',
    'jupyterlab-widgets>=3.0.0,<4.0.0',
    'jupyter_client>=8.0.0,<9.0.0',
    'networkx==2.4',
    'Jinja2>=3.0.3,<=3.1.4',
    'jupyter-server-proxy>=4.0.0,<5.0.0',
    'notebook>=7.0.0,<8.0.0',
    'nbclient>=0.7.3',
    'botocore>=1.34.74',
    'boto3>=1.34.74',
    'ipython>=7.16.1,<=8.10.0',
    'neo4j>=5.0.0,<=5.23.1',
    'rdflib==7.0.0',
    'ipykernel>=6.5.0',
    'ipyfilechooser==0.6.0',
    'nbconvert>=6.3.0,<=7.2.8',
    'jedi>=0.18.1,<=0.18.2',
    'itables>=2.0.0,<=2.1.0',
    'pandas>=2.1.0,<=2.2.2',
    'numpy>=1.23.5,<1.24.0',
    'nest_asyncio>=1.5.5,<=1.6.0',
    'async-timeout>=4.0,<5.0',
    'json-repair==0.29.2',
    'jupyter-lsp>=2.0.0',
    'python-lsp-server>=1.7.0',
    'jupyterlab-lsp>=5.0.0'
]

[project.optional-dependencies]
test = [
    "pytest==6.2.5"
]

[tool.hatch.build]
include = [
    "src/graph_notebook/widgets/package.json",
    "src/graph_notebook/widgets/tsconfig.json",
    "src/graph_notebook/widgets/webpack.config.js",
    "src/graph_notebook/widgets/src/**",
    "src/graph_notebook/widgets/css/**"
]

[tool.hatch.build.targets.wheel]
packages = ["graph_notebook"]
sources = ["src"]

[tool.hatch.build.targets.wheel.shared-data]
"src/graph_notebook/widgets/labextension/package.json" = "share/jupyter/labextensions/graph_notebook_widgets/package.json"
"src/graph_notebook/widgets/labextension/static" = "share/jupyter/labextensions/graph_notebook_widgets/static"
"src/graph_notebook/widgets/nbextension" = "share/jupyter/nbextensions/graph_notebook_widgets"
"src/graph_notebook/widgets/graph_notebook_widgets.json" = "etc/jupyter/nbconfig/notebook.d/graph_notebook_widgets.json"


[tool.hatch.build.hooks.jupyter-builder]
dependencies = ["hatch-jupyter-builder"]
build-function = "hatch_jupyter_builder.npm_builder"
build-kwargs = { build_cmd = "build:prod", npm = ["npm", "--prefix", "src/graph_notebook/widgets"], source_dir = "src/graph_notebook/widgets" }

[tool.jupyter-releaser.options]
version_cmd = "hatch version"